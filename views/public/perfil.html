<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfil del cliente</title>
    <!--Link de recursos bootstrap css-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <!--Link de recursos css de la pantalla perfil-->
    <link rel="stylesheet" href="../../resources/css/perfilcliente.css">
    <!--Link de recursos css del buscador-->
    <link rel="stylesheet" href="../../resources/css/buscador.css">
</head>

<body>
    <main>
        <!--Primera parte del perfil-->
        <div class="container mb-4">
            <div class="row">
                <div class="col text-center">
                    <div class="d-flex align-items-center justify-content-center">
                        <h3 class="ms-5 mt-4">Mi cuenta</h3>

                    </div>
                </div>
            </div>

            <!--contenedor donde se mostraran los datos del perfil del usuario-->
            <div class="container mt-4" id="conte">
                <div class="row ">
                    <div class="col-lg-8">

                        <!--contenedor para la edicion de datos del perfil-->
                        <form class="row g-3" id="profileForm">
                            <div class="col-md-5 mt-5 d-flex flex-column align-items-center">
                                <div class="position-relative mb-4">
                                    <img src="../../resources/images/userIcon.png"
                                        class="col-md-12 col-lg-7 mb-1 rounded-circle" alt="..." id="imagen">
                                    <input type="file" id="fotoInput" name="fotoInput" accept="image/*" class="d-none">
                                    <button type="button"
                                        class="btn position-absolute bottom-0 end-0 translate-middle mt-5"
                                        id="botonCargarFoto" onclick="document.getElementById('fotoInput').click()">
                                        <img src="../../resources/images/edit.png" alt="" width="30px" height="30px"
                                            class="mb-1 mt-4">
                                    </button>
                                </div>
                                <div class="mb-3">
                                    <label for="fecharegistroCliente" class="form-label">Registrado desde:</label>
                                    <input id="fecharegistroCliente" type="text" name="fecharegistroCliente"
                                        class="form-control text-center" required readonly>
                                </div>

                                <div class="mb-3">
                                    <label for="productoMasAdquirido" class="form-label">Producto más adquirido:</label>
                                    <input id="productoMasAdquirido" type="text" name="productoMasAdquirido"
                                        class="form-control text-center" required readonly>
                                </div>

                                <div class="mb-3">
                                    <label for="ultimafechaCompra" class="form-label">Fecha de su última compra:</label>
                                    <input id="ultimafechaCompra" type="text" name="ultimafechaCompra"
                                        class="form-control text-center" required readonly>
                                </div>


                            </div>

                            <!-- Contenedor para el ingreso y edicion de datos para el perfil -->
                            <div class="col-md-7">
                                <div class="row g-3">
                                    <input id="idCliente" type="text" name="idCliente" class="form-control" hidden>
                                    <div class="col-sm-12 col-md-10">
                                        <label for="nombreCliente" class="form-label">Nombre:</label>
                                        <input autocomplete="off" id="nombreCliente" type="text" name="nombreCliente"
                                            class="form-control" required
                                            oninput="this.value = this.value.replace(/[^A-Za-z\s]/g, '')">
                                    </div>
                                    <div class="col-sm-12 col-md-10">
                                        <label for="apellidoCliente" class="form-label">Apellido:</label>
                                        <input autocomplete="off" id="apellidoCliente" type="text"
                                            name="apellidoCliente" class="form-control" required
                                            oninput="this.value = this.value.replace(/[^A-Za-z\s]/g, '')">
                                    </div>
                                    <div class="col-sm-12 col-md-10">
                                        <label for="duiCliente" class="form-label">Dui:</label>
                                        <input autocomplete="off" id="duiCliente" type="text" name="duiCliente"
                                            class="form-control" required
                                            oninput="this.value = this.value.replace(/[^0-9-]/g, '')" pattern="[0-9-]+"
                                            maxlength="10">
                                    </div>
                                    <div class="col-sm-12 col-md-10">
                                        <label for="correoCliente" class="form-label">Correo:</label>
                                        <input autocomplete="off" id="correoCliente" type="email" name="correoCliente"
                                            class="form-control" required>
                                    </div>
                                    <div class="col-sm-12 col-md-10">
                                        <label for="telefonoCliente" class="form-label">Teléfono:</label>
                                        <input autocomplete="off" id="telefonoCliente" type="text"
                                            name="telefonoCliente" class="form-control" required maxlength="9"
                                            pattern="[0-9\-]*"
                                            oninput="this.value = this.value.replace(/[^\d-]/g, '');">
                                    </div>
                                    <div class="col-sm-12 col-md-10">
                                        <label for="direccionCliente" class="form-label">Dirección:</label>
                                        <input autocomplete="off" id="direccionCliente" type="text"
                                            name="direccionCliente" class="form-control" required>
                                    </div>
                                </div>

                                <!-- Contenedor para los botones de edicion y actualizacion de datos del perfil del usuario -->
                                <div class="text-center mb-4 mt-3">

                                    <!-- Contenedor Flex para la imagen y el texto de cerrar sesión -->
                                    <div class="d-flex align-items-center" id="cerrarS">
                                        <img src="../../resources/images/cerrarsesion.png" alt="..." width="40px"
                                            height="40px" class="imagenCerarr" onclick="logOut()">
                                        <a onclick="logOut()" class="d-flex align-items-center ms-2">
                                            <h6 class="textito mb-0">Cerrar sesión</h6>
                                        </a>

                                        <button type="submit" class="btn mt-1" id="botonActualizarDatos">
                                            <img src="../../resources/images/editardatos.png" alt="Editar datos"
                                                width="40px" height="40px" class="ms-5 botonC">
                                        </button>


                                        <button type="button" class="btn rounded-2 mt-1" onclick="openPassword()"
                                            id="botonActualizarContrasena">
                                            <img src="../../resources/images/cambiarcontra.png" alt="Cambiar contraseña"
                                                width="40px" height="40px" class="ms-3 botonC">
                                        </button>
                                    </div>


                                </div>
                            </div>

                        </form>
                    </div>

                    <!-- Contenedor para el boton para la revision de alumnos registrados en el sistema -->
                    <div class="col-lg-4">

                        <form class="row g-3" id="profileForm2">

                            <h3 class="card-title text-center">Alumnos registrados
                                <a href="verpagosrealizados.html">
                                    <img src="../../resources/images/verhistroialpagos.png" alt="..." width="50px"
                                        height="40px" class="mx-4 mt-2"></a>
                            </h3>

                            <div class="card mb-4 h-100" id="cardAlumnos">

                            </div>

                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- modal para el cambio de contraseña del usuario -->
        <div class="modal fade" id="passwordModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
            aria-labelledby="modalTitle" aria-hidden="true">
            <div class="modal-dialog modal-lg modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header d-flex justify-content-between align-items-center">
                        <div class="d-flex align-items-center">
                            <h1 class="modal-title fs-5 fw-bold me-3 text-white" id="modalTitle">Cambiar contraseña</h1>
                            <img src="../../resources/images/logoAcademiaBP.png" alt="logoAcademiaBP"
                                class="btn-close logo-academia" data-bs-dismiss="modal" aria-label="Close">
                        </div>
                        <button type="button"></button>
                    </div>
                    <form id="passwordForm">
                        <div class="modal-body row g-3">
                            <div class="col-sm-12 col-md-6 offset-md-3">
                                <label for="claveActual" class="form-label col-12 text-center">Clave actual</label>
                                <input id="claveActual" type="password" name="claveActual" class="form-control"
                                    required>
                            </div>
                            <div class="col-sm-12 col-md-6">
                                <label for="claveNueva" class="form-label">Nueva clave</label>
                                <input id="claveNueva" type="password" name="claveNueva" class="form-control" required>
                            </div>
                            <div class="col-sm-12 col-md-6">
                                <label for="confirmarClave" class="form-label">Confirmar clave</label>
                                <input id="confirmarClave" type="password" name="confirmarClave" class="form-control"
                                    required>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="submit" class="btn btn-dark">Guardar</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <div class="modal fade" id="modalMetodos" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
            aria-labelledby="modalTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-lg">
                <div class="modal-content">
                    <!-- Encabezado del modal -->
                    <div class="modal-header border-0">
                        <h1 class="modal-title fs-5 text-white" id="modalTitle2">Complete aquí su pago</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>

                    <!-- Formulario para métodos de pago -->
                    <form id="metodosForm" class="p-3">
                        <h4 class="modal-title fs-5 text-white">Seleccione un método de pago</h4>

                        <!-- Cards de métodos de pago -->
                        <div class="row rounded border-3" id="cardsMetodos"></div>

                        <input type="hidden" id="idMetodoPago" name="idMetodoPago">
                        <input type="hidden" id="idAlumno" name="idAlumno">
                        <input type="hidden" id="SelectDatosPago" name="SelectDatosPago">
                        <!-- Inputs del método de pago -->
                        <div class="text-center mb-3">
                            <div class="row">
                                <!-- Datos del pago y método de pago -->
                                <div class="col-sm-12 col-md-6 mb-3">
                                    <label for="datosPago" class="col-sm-7 col-form-label">Datos del pago</label>
                                    <input id="datosPago" type="text" name="datosPago" class="form-control"
                                        autocomplete="off" readonly>
                                </div>

                                <div class="col-sm-12 col-md-6 mb-3">
                                    <label for="nombreMetodo" class="col-sm-7 col-form-label">Método de pago:</label>
                                    <input id="nombreMetodo" type="text" name="nombreMetodo" class="form-control"
                                        readonly autocomplete="off" oninput="debouncedActualizarDatosPago()">
                                </div>

                                <!-- Inputs para tarjeta de crédito y débito -->
                                <div class="col-sm-12 col-md-6 mb-3">
                                    <label for="numeroTarjeta" class="col-sm-7 col-form-label" id="labeltarjeta">Número
                                        de tarjeta:</label>
                                    <input id="numeroTarjeta" type="text" name="numeroTarjeta" class="form-control"
                                        autocomplete="off" oninput="debouncedActualizarDatosPago()">
                                </div>

                                <div class="col-sm-12 col-md-6 mb-3">
                                    <label for="nombreTarjeta" class="col-sm-7 col-form-label" id="nombretarjeta">Nombre
                                        en tarjeta:</label>
                                    <input id="nombreTarjeta" type="text" name="nombreTarjeta" class="form-control"
                                        autocomplete="off" oninput="debouncedActualizarDatosPago()">
                                </div>

                                <div class="col-sm-12 col-md-6 mb-3">
                                    <label for="mesVencimiento" class="col-sm-7 col-form-label"
                                        id="mesvecnimientotarjeta">Mes de vencimiento:</label>
                                    <input id="mesVencimiento" type="number" name="mesVencimiento" class="form-control"
                                        placeholder="MM" min="1" max="12" autocomplete="off"
                                        oninput="debouncedActualizarDatosPago()">
                                </div>

                                <div class="col-sm-12 col-md-6 mb-3">
                                    <label for="anioVencimiento" class="col-sm-7 col-form-label"
                                        id="aniovecnimientolabeltarjeta">Año de vencimiento:</label>
                                    <input id="anioVencimiento" type="number" name="anioVencimiento"
                                        class="form-control" placeholder="AAAA" min="2024" autocomplete="off"
                                        oninput="debouncedActualizarDatosPago()">
                                </div>

                                <div class="col-sm-12 col-md-6 mb-3">
                                    <label for="codigoCVV" class="col-sm-7 col-form-label" id="cvvtarjeta">Código
                                        CVV:</label>
                                    <input id="codigoCVV" type="number" name="codigoCVV" class="form-control"
                                        autocomplete="off" oninput="debouncedActualizarDatosPago()">
                                </div>

                                <!-- PayPal: Input para correo electrónico -->
                                <div class="col-sm-12 col-md-6 mb-3" id="inputPayPal">
                                    <label for="paypalCorreo" class="col-sm-7 col-form-label"
                                        id="correoPaypal">Correo de PayPal:</label>
                                    <input id="paypalCorreo" type="email" name="paypalCorreo"
                                        class="form-control" autocomplete="off"
                                        oninput="debouncedActualizarDatosPago()">
                                </div>

                                <!-- Transferencia Bancaria: Inputs para número de cuenta y código SWIFT/BAN -->
                                <div class="col-sm-12 col-md-6 mb-3" id="inputTransferencia">
                                    <label for="numeroCuenta" class="col-sm-7 col-form-label" id="cuentanumero">Número
                                        de cuenta:</label>
                                    <input id="numeroCuenta" type="text" name="numeroCuenta" class="form-control"
                                        autocomplete="off" oninput="debouncedActualizarDatosPago()">
                                </div>

                                <div class="col-sm-12 col-md-6 mb-3" id="inputSWIFT">
                                    <label for="codigoSWIFT" class="col-sm-7 col-form-label" id="codigos">Código
                                        SWIFT/BAN:</label>
                                    <input id="codigoSWIFT" type="text" name="codigoSWIFT" class="form-control"
                                        autocomplete="off" oninput="debouncedActualizarDatosPago()">
                                </div>

                                <!-- Efectivo: Inputs para mostrar el precio a pagar, cuánto se pagó, cuánto se dio de cambio-->
                                <div class="col-sm-12 col-md-6 mb-3" id="inputTotalPagar">
                                    <label for="totalPagar" class="col-sm-7 col-form-label" id="cuentanumero">Total a pagar:</label>
                                    <input id="totalPagar" type="numeber" name="totalPagar" class="form-control"
                                        autocomplete="off" oninput="debouncedActualizarDatosPago()" disabled>
                                </div>

                                <div class="col-sm-12 col-md-6 mb-3" id="InputTotalDado">
                                    <label for="totalDado" class="col-sm-7 col-form-label" id="codigos">Total dado por el cliente</label>
                                    <input id="totalDado" type="number" name="totalDado" class="form-control"
                                        autocomplete="off" oninput="debouncedActualizarDatosPago()">
                                </div>

                                <div class="col-sm-12 col-md-6 mb-3" id="inputVuelto">
                                    <label for="cambioDado" class="col-sm-7 col-form-label" id="codigos">Cambio entregado</label>
                                    <input id="cambioDado" type="text" name="cambioDado" class="form-control"
                                        autocomplete="off" oninput="debouncedActualizarDatosPago()" disabled>
                                </div>
                            </div>
                        </div>

                        <button type="submit" class="btn btn-dark col-lg-6 mt-1 btn-pagar btnPagar" id="botonFinalizar">
                            <img src="../../resources/images/finich.png" alt="..." width="30px" height="30px">
                            Finalizar pago
                        </button>
                    </form>
                </div>
            </div>
        </div>


    </main>


    <!--Scripts de bootstrap-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
        crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="../../controllers/utils/sweetalert.min.js"></script>
    <script src="../../controllers/utils/components.js"></script>

    <!--Font awesome-->
    <script src="https://kit.fontawesome.com/22fd8b70d9.js" crossorigin="anonymous"></script>

    <script src="../../controllers/utils/public.js"></script>
    <script src="../../controllers/public/perfil.js"></script>
    <script src="../../controllers/utils/metodospagospublico.js"></script>
</body>

</html>